<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE CLISH_MODULE [
<!ENTITY START_PORT_ID "1">
<!ENTITY MAX_PORT_ID "32">
<!ENTITY START_SUB_PORT_ID "1">
<!ENTITY MAX_SUB_PORT_ID "4">
<!ENTITY MAX_MTU "9216">
]>
<CLISH_MODULE xmlns="http://www.dellemc.com/sonic/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xi="http://www.w3.org/2001/XInclude" xsi:schemaLocation="http://www.dellemc.com/sonic/XMLSchema http://www.dellemc.com/sonic/XMLSchema/clish.xsd">
  <VIEW name="enable-view">
    <COMMAND name="show interface breakout" help="Show port-breakout information">
        <PARAM
             name="dpb-subcommands"
             help="Breakout subcommands"
             mode="switch"
             ptype="SUBCOMMAND"
             >
            <PARAM name="dependencies" help="Show dependent configuations on interface" ptype="SUBCOMMAND" mode="subcommand">
                <PARAM name="iface" help="Ethernet interface" ptype="PHY_INTERFACE"/>
            </PARAM>
            <PARAM name="iface" help="Ethernet interface" ptype="PHY_INTERFACE"/>
        </PARAM>
        <ACTION>
            if test "${dpb-subcommands}" = "dependencies"; then&#xA;
                python $SONIC_CLI_ROOT/sonic_cli_breakout.py rpc_sonic_port_breakout_breakout_dependencies show_breakout_deps.j2 ${iface}&#xA;
            else&#xA;
                python $SONIC_CLI_ROOT/sonic_cli_breakout.py get_openconfig_platform_port_components_component_port_breakout_mode_config show_interface_breakout.j2 ${iface}&#xA;
            fi&#xA;
        </ACTION>
      <xi:include href="include/pipe.xml"/>
      <DOCGEN>
          <DESCRIPTION>
              Show the dependent configurations on interfaces.
          </DESCRIPTION>
          <USAGE>
              Use this command to show the dependent configurations on an interface.

          </USAGE>
          <EXAMPLE>
              sonic# show interface breakout Ethernet 0
              =============================
              Interface     Breakout mode
              =============================
              Ethernet0     4x25G
          </EXAMPLE>
      </DOCGEN>
    </COMMAND>
  </VIEW>
  <VIEW name="configure-view">
    <COMMAND name="no interface breakout" help="Change the port breakout mode to default">
       <PARAM name="iface" help="Ethernet interface" ptype="PHY_INTERFACE"/>
            <ACTION builtin="clish_pyobj">sonic_cli_breakout delete_openconfig_platform_port_components_component_port_breakout_mode_config ${iface} </ACTION>
    </COMMAND>
    <COMMAND name="interface breakout" help="Port breakout configuration commands">
       <PARAM name="iface" help="Ethernet interface" ptype="PHY_INTERFACE" mode="subcommand">
        <PARAM name="breakout_mode" help="breakout mode" ptype="DPB_MODE">
        </PARAM>
       </PARAM>
      <ACTION builtin="clish_pyobj">sonic_cli_breakout patch_openconfig_platform_port_components_component_port_breakout_mode_config ${iface} ${breakout_mode}</ACTION>
      <DOCGEN>
          <DESCRIPTION>
              Breakout a port
          </DESCRIPTION>
          <USAGE>
              Use this command breakout a port.
          </USAGE>
          <EXAMPLE>
              sonic# configure terminal
              sonic(config)# interface breakout Ethernet 0 4x25
              sonic(config)# no interface breakout Ethernet 0
          </EXAMPLE>
      </DOCGEN>
    </COMMAND>
  </VIEW>
</CLISH_MODULE>
