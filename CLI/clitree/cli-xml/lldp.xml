<?xml version="1.0" encoding="UTF-8"?>

<!--
Copyright 2019 Dell, Inc.  

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
--> 

<CLISH_MODULE
    xmlns="http://www.dellemc.com/sonic/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://www.dellemc.com/sonic/XMLSchema
    http://www.dellemc.com/sonic/XMLSchema/clish.xsd"
    >

<VIEW name="enable-view">
   <COMMAND name="show lldp" help="Show lldp information">
         <ACTION> python $SONIC_CLI_ROOT/sonic-cli-lldp.py get_openconfig_lldp_lldp_interfaces lldp_show.j2 ${__full_line}</ACTION>
   </COMMAND>
   <COMMAND name="show lldp table" help="Show lldp table information">
        <ACTION> python $SONIC_CLI_ROOT/sonic-cli-lldp.py get_openconfig_lldp_lldp_interfaces lldp_show.j2 ${__full_line} </ACTION>
        <DOCGEN>
            <DESCRIPTION>
                Shows LLPD neigbhor information in brief
            </DESCRIPTION>
            <USAGE>
                This command is useful to view the LLDP neighbor information in brief
            </USAGE>
            <EXAMPLE summary="Shows LLDP neigbhor information in brief">
                sonic-cli# show lldp table
                ------------------------------------------------------------------------------------------------------
                LocalPort           RemoteDevice        RemotePortID        Capability           RemotePortDescr
                -------------------------------------------------------------------------------------------------------
                Ethernet64          Leaf9               hundredGigE53       BR                  Ethernet64          
            </EXAMPLE>
        </DOCGEN>
   </COMMAND>
   <COMMAND name="show lldp neighbor" help="Show lldp neighbor information">
	 <PARAM
            name="ifname"
            help="Interface name"
	        ptype="STRING"
	        optional="true"
           >
        </PARAM>
	<ACTION>
	    if test "${ifname}" = ""; then&#xA;
            python $SONIC_CLI_ROOT/sonic-cli-lldp.py get_openconfig_lldp_lldp_interfaces lldp_neighbor_show.j2 ${__full_line}&#xA;
	    else&#xA;
	        python $SONIC_CLI_ROOT/sonic-cli-lldp.py get_openconfig_lldp_lldp_interfaces_interface lldp_neighbor_show.j2 ${ifname} ${__full_line}&#xA;
		fi&#xA;
    </ACTION>
    <DOCGEN>
        <DESCRIPTION>
            Shows LLPD neigbhor information in detail
        </DESCRIPTION>
        <USAGE>
            This command is useful to view the LLDP neighbor information in detail
        </USAGE>
        <EXAMPLE summary="Shows LLDP neigbhor information in detail">
        sonic-cli# show lldp neighbor 
        -----------------------------------------------------------
        LLDP Neighbors      
        -----------------------------------------------------------
        Interface:   Ethernet64,via: LLDP
        Chassis:
            ChassisID:    80:a2:35:26:48:5e
            SysName:      Leaf9
            SysDescr:     Debian GNU/Linux 9 (stretch) Linux 4.9.0-11-2-amd64 #1 SMP Debian 4.9.189-3+deb9u2 (2019-11-11) x86_64
            MgmtIP:       10.59.132.165
            MgmtIP:       10.59.132.165
            Capability:   MAC_BRIDGE, ON
            Capability:   ROUTER, ON
        Port
            PortID:       hundredGigE53
            PortDescr:    Ethernet64
        -----------------------------------------------------------
        </EXAMPLE>
    </DOCGEN>
   </COMMAND>
</VIEW>

<!--MODE : Global LLDP config commands-->
<PTYPE
	name = "LLDP_HELLO_TIME_TYPE"
	method = "integer"
	pattern = "5..254"
	help = ""
/>

<PTYPE
	name = "LLDP_MULTIPLIER_TYPE"
	method = "integer"
	pattern = "1..10"
	help = ""
/>

<PTYPE
	name="LLDP_MODE_TYPE"
	method="select"
	pattern="receive transmit"
	help="Mode type"
/>

<PTYPE
	name="LLDP_TLV_TYPE"
	method="select"
	pattern="management-address system-capabilities"
	help="TLV type"
/>

<VIEW name="configure-view">
	<COMMAND name="lldp" help="LLDP configuration subcommands"/>
	<COMMAND name="no lldp" help="LLDP configuration subcommands"/>
	<COMMAND name = "lldp disable"
		help = "Disable LLDP at global level">
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py disable_lldp_global false</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Disable LLDP at global level
			</DESCRIPTION>
			<USAGE>
				Use this command to disable LLDP globally
			</USAGE>
			<EXAMPLE summary="Disable LLDP at global level">
				sonic-cli(config)# lldp disable
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "no lldp disable"
		help = "Enable LLDP at global level">
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py enable_lldp_global</ACTION>
		
		<DOCGEN>
			<DESCRIPTION>
				Enable LLDP at global level.
			</DESCRIPTION>
			<USAGE>
				Use this command to enable LLDP globally.
			</USAGE>
			<EXAMPLE summary="Enable LLDP at global level">
				sonic-cli(config)# no lldp disable
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "lldp hello-time"
		help = "Configure LLDP hello time value in seconds (5 - 254 sec)">
		<PARAM
			name="hello-time"
			help="Hello time value (Range 5 - 254 seconds)"
			ptype="LLDP_HELLO_TIME_TYPE">
		</PARAM>
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py set_hello_time ${hello-time}</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Configure LLDP hello time. It is the time interval at which periodic hellos are exchanged.
			</DESCRIPTION>
			<USAGE>
				Use this command to set LLDP hello time. Default message time is 30 seconds.
			</USAGE>
			<EXAMPLE summary="Configure LLDP hello time">
				sonic-cli(config)# lldp hello-time 10 
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "no lldp hello-time" help = "Unconfigure LLDP hello time value ">
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py del_hello_time</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Unconfigure LLDP hello time.
			</DESCRIPTION>
			<USAGE>
				Use this command to set LLDP hello time to Default value.
			</USAGE>
			<EXAMPLE summary="Unconfigure LLDP hello time">
				sonic-cli(config)# no lldp hello-time
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "lldp multiplier"
		help = "Configure LLDP multiplier value (1 - 10)">
		<PARAM
			name="multiplier"
			help="Multiplier value (Range 1 - 10)"
			ptype="LLDP_MULTIPLIER_TYPE">
		</PARAM>
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py set_multiplier ${multiplier}</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Configure LLDP multiplier value that is used to determine the 
				timeout interval (i.e. hello-time x multiplier value) after
				which LLDP neighbor entry is deleted
			</DESCRIPTION>
			<USAGE>
				Use this command to set LLDP multiplier value. Default value is 4.
			</USAGE>
			<EXAMPLE summary="Configure LLDP multiplier">
				sonic-cli(config)# lldp multiplier 6 
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "no lldp multiplier" help = "Unconfigure LLDP multiplier value ">
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py del_multiplier</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Unconfigure LLDP multiplier value.
			</DESCRIPTION>
			<USAGE>
				Use this command to set LLDP multiplier value to Default value.
			</USAGE>
			<EXAMPLE summary="Unconfigure LLDP multiplier value">
				sonic-cli(config)# no lldp multiplier 
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "lldp system-name"
		help = "Configure LLDP System Name">
		<PARAM
			name="system_name"
			help="System Name"
			ptype="STRING">
		</PARAM>
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py set_system_name ${system_name}</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Configure LLDP System name.
			</DESCRIPTION>
			<USAGE>
				Use this command to configure LLDP system name.
			</USAGE>
			<EXAMPLE summary="Configure LLDP system name">
				sonic-cli(config)# lldp system-name "BroadcomSonic"
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "no lldp system-name" help = "Unconfigure LLDP system name">
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py del_system_name</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Unconfigure LLDP system name.
			</DESCRIPTION>
			<USAGE>
				Use this command to unconfigure LLDP system name.
			</USAGE>
			<EXAMPLE summary="Unconfigure LLDP system name">
				sonic-cli(config)# no lldp system-name 
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>


	<COMMAND name = "lldp system-description"
		help = "Configure LLDP System description">
		<PARAM
			name="system_description"
			help="System description"
			ptype="LINE">
		</PARAM>
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py set_system_description "${system_description}"</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Configure LLDP System description.
			</DESCRIPTION>
			<USAGE>
				Use this command to configure LLDP system description.
			</USAGE>
			<EXAMPLE summary="Configure LLDP system description">
				sonic-cli(config)# lldp system-description "Broadcom Sonic"
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "no lldp system-description" help = "Unconfigure LLDP system description">
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py del_system_description</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Unconfigure LLDP system description.
			</DESCRIPTION>
			<USAGE>
				Use this command to unconfigure LLDP system description.
			</USAGE>
			<EXAMPLE summary="Unconfigure LLDP system description">
				sonic-cli(config)# no lldp system-description 
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "lldp mode"
		help = "Configure LLDP Mode">
		<PARAM
			name="mode"
			help="Mode"
			ptype="LLDP_MODE_TYPE">
		</PARAM>
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py set_mode ${mode}</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Configure LLDP Mode.
			</DESCRIPTION>
			<USAGE>
				Use this command to configure LLDP mode.
			</USAGE>
			<EXAMPLE summary="Configure LLDP mode">
				sonic-cli(config)# lldp mode receive
						or
				sonic-cli(config)# lldp mode transmit
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "no lldp mode" help = "Unconfigure LLDP mode">
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py del_mode</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Unconfigure LLDP mode.
			</DESCRIPTION>
			<USAGE>
				Use this command to unconfigure LLDP mode.
			</USAGE>
			<EXAMPLE summary="Unconfigure LLDP mode">
				sonic-cli(config)# no lldp mode 
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "lldp suppress-tlv"
		help = "Configure LLDP TLVs to be suppressed in LLDP frame">
		<PARAM
			name="tlv"
			help="TLV to be suppressed"
			ptype="LLDP_TLV_TYPE">
		</PARAM>
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py set_tlv ${tlv}</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Configure LLDP TLVs to be suppressed. 
			</DESCRIPTION>
			<USAGE>
				Use this command to configure LLDP TLVs to be suppressed 
			</USAGE>
			<EXAMPLE summary="Configure LLDP suppress tlv">
				sonic-cli(config)# lldp suppress-tlv system-capabilities 
				sonic-cli(config)# lldp suppress-tlv management-address 
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "no lldp suppress-tlv" help = "Unconfigure LLDP ">
		<PARAM
			name="tlv"
			help="TLV to be suppressed"
			ptype="LLDP_TLV_TYPE">
		</PARAM>
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py del_tlv ${tlv}</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Unconfigure LLDP TLVs to be suppressed. 
			</DESCRIPTION>
			<USAGE>
				Use this command to unconfigure LLDP TLVs to be suppressed 
			</USAGE>
			<EXAMPLE summary="Unconfigure LLDP ">
				sonic-cli(config)# no lldp suppress-tlv system-capabilities 
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>
	</VIEW>

	<!--MODE : interface -->
	<VIEW name="configure-if-view">
	<COMMAND name="lldp" help="LLDP interface configuration subcommands"/>
	<COMMAND name="no lldp" help="LLDP interface configuration subcommands"/>
	<COMMAND name = "lldp disable"
		help = "Disable LLDP at interface level">
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py disable_lldp_intf ${iface} false</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Disable LLDP at interface level
			</DESCRIPTION>
			<USAGE>
				Use this command to disable LLDP at interface level
			</USAGE>
			<EXAMPLE summary="Disable LLDP at interface level">
				sonic-cli(config)# interface Ethernet 0
				sonic-cli(conf-if-Ethernet0)# lldp disable
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "no lldp disable"
		help = "Enable LLDP at interface level">
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py enable_lldp_intf ${iface}</ACTION>
		
		<DOCGEN>
			<DESCRIPTION>
				Enable LLDP at interface level.
			</DESCRIPTION>
			<USAGE>
				Use this command to enable LLDP at interface level.
			</USAGE>
			<EXAMPLE summary="Enable LLDP at interface level">
				sonic-cli(config)# interface Ethernet 0
				sonic-cli(conf-if-Ethernet0)# no lldp disable
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "lldp mode"
		help = "Configure LLDP Mode">
		<PARAM
			name="mode"
			help="Mode"
			ptype="LLDP_MODE_TYPE">
		</PARAM>
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py set_lldp_intf_mode ${iface} ${mode}</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Configure LLDP Mode.
			</DESCRIPTION>
			<USAGE>
				Use this command to configure LLDP mode.
			</USAGE>
			<EXAMPLE summary="Configure LLDP mode">
				sonic-cli(config)# lldp mode transmit 
						or
				sonic-cli(config)# lldp mode receive 
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>

	<COMMAND name = "no lldp mode" help = "Unconfigure LLDP mode">
		<ACTION>python $SONIC_CLI_ROOT/sonic-cli-lldp.py del_lldp_intf_mode ${iface}</ACTION>

		<DOCGEN>
			<DESCRIPTION>
				Unconfigure LLDP mode.
			</DESCRIPTION>
			<USAGE>
				Use this command to unconfigure LLDP mode.
			</USAGE>
			<EXAMPLE summary="Unconfigure LLDP mode">
				sonic-cli(config)# no lldp mode 
			</EXAMPLE>
		</DOCGEN>
	</COMMAND>
		
	</VIEW>

</CLISH_MODULE>
